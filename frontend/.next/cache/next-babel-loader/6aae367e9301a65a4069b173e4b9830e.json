{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/martinadams/Desktop/FLO-OIP projects/DDX/oip-ddx-light/frontend/components/views/dumb/recordRow/RecordRow.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState, useEffect } from 'react';\nimport withStyles from 'react-jss';\nimport PropTypes from 'prop-types';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { FaTwitter } from 'react-icons/fa';\nimport config from '../config.js';\nimport knownTemplates from '../../templates/knownTemplates';\nimport getIpfsUrl from '../helpers/getIpfsUrl';\nimport { connect } from 'react-redux';\nimport { purchaseRecord, proofOfPurchase } from '../../redux/actions/Wallet/thunks.js';\nimport { updatePurchasedTxid } from '../../redux/actions/Autopay/creators';\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      wordBreak: 'break-word',\n      borderTop: \"1px solid \".concat(theme.palette.greyscale(0.3)),\n      padding: 10,\n      fontSize: 12,\n      boxSizing: 'border-box'\n    },\n    tableData: {\n      width: '100%'\n    },\n    thumbnail: {\n      width: 300,\n      \"float\": 'right',\n      paddingRight: 16,\n      paddingBottom: 10,\n      marginTop: 10\n    },\n    templateData: {},\n    templateDataRow: {\n      // width: 30\n      margin: [7, 0]\n    },\n    templateName: {\n      backgroundColor: theme.palette.primary.main,\n      fontWeight: '600',\n      color: 'white',\n      padding: [3, 4]\n    },\n    recordField: {\n      fontWeight: '600',\n      color: theme.palette.greyscale(0.9),\n      padding: [2, 4]\n    },\n    recordFieldRow: {\n      margin: [7, 16]\n    },\n    actionBarRoot: {\n      display: 'flex',\n      flex: '0 0 30px',\n      alignItems: 'center',\n      justifyContent: 'flex-end'\n    },\n    actionIcon: {\n      cursor: 'pointer'\n    },\n    txidHeader: {\n      fontSize: 12,\n      color: theme.palette.primary.main,\n      outline: 'none',\n      textDecoration: 'none',\n      '&:visited': {\n        color: theme.palette.tertiary.main\n      },\n      transition: 'all .2s ease-in-out',\n      '&:hover': {\n        transform: 'scale(1.1)'\n      }\n    },\n    linkRowRoot: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    actionIconButton: {\n      display: 'flex',\n      alignItems: 'center',\n      backgroundColor: 'transparent',\n      padding: [3, 7],\n      border: '1px solid',\n      borderRadius: 3,\n      marginLeft: 7,\n      '&:hover': {\n        cursor: 'pointer' // backgroundColor: 'black',\n        // color: 'white'\n\n      }\n    },\n    searchLink: {\n      display: 'inherit',\n      '& > img': {\n        height: 13\n      }\n    },\n    twitterButton: {\n      extend: 'actionIconButton',\n      borderColor: '#1DA1F2',\n      '&:hover': {\n        backgroundColor: '#1DA1F2',\n        '& > $twitterLink': {\n          color: 'white'\n        }\n      }\n    },\n    twitterLink: {\n      display: 'flex',\n      color: '#1DA1F2',\n      borderColor: '#1DA1F2',\n      backgroundColor: 'transparent'\n    },\n    gabButton: {\n      extend: 'actionIconButton',\n      borderColor: '#00D384',\n      '&:hover': {\n        // backgroundColor: '#1DA1F2',\n        '& > $twitterLink': {// color: 'white'\n        }\n      }\n    },\n    gabLink: {\n      display: 'flex',\n      // color: '#1DA1F2',\n      // borderColor: '#1DA1F2',\n      backgroundColor: 'transparent',\n      '& > img': {\n        height: 14\n      }\n    },\n    validButton: {\n      display: 'flex',\n      alignSelf: 'flex-end',\n      border: '.5em solid black',\n      borderRadius: '10%',\n      height: '2rem',\n      width: '2rem',\n      padding: '2px',\n      cursor: 'pointer',\n      transition: 'all .2s ease-in-out',\n      '&:hover': {\n        transform: 'scale(1.05)'\n      }\n    },\n    triangleUp: {\n      width: '0',\n      height: '0',\n      borderLeft: '1rem solid transparent',\n      borderRight: '1rem solid transparent',\n      borderBottom: '2rem solid rgb(13,112,16)'\n    },\n    triangleDown: {\n      width: '0',\n      height: '0',\n      borderLeft: '1rem solid transparent',\n      borderRight: '1rem solid transparent',\n      borderTop: '2rem solid rgb(179,27,17)'\n    },\n    confirmsUp: {\n      color: '#fff',\n      fontSize: '1.25rem',\n      position: 'relative',\n      right: '72%',\n      top: '25%'\n    },\n    confirmsDown: {\n      color: '#fff',\n      fontSize: '1.25rem',\n      position: 'relative',\n      right: '72%',\n      top: '0%'\n    },\n    dialogBox: {\n      position: 'relative',\n      background: '#fff',\n      border: '4px solid #000',\n      height: '6rem',\n      width: '8rem',\n      padding: '2rem',\n      borderRadius: '5%',\n      '&:after,&:before': {\n        left: '100%',\n        top: '35%',\n        border: 'solid transparent',\n        content: \"\\\" \\\"\",\n        height: '0',\n        width: '0',\n        position: 'absolute',\n        pointerEvents: 'none'\n      },\n      '&:after': {\n        borderColor: 'rgba(213,213,213,0)',\n        borderLeftColor: '#fff',\n        borderWidth: '25px',\n        marginTop: '-25px'\n      },\n      '&:before': {\n        borderColor: 'rgba(0,0,0,0)',\n        borderLeftColor: '#000',\n        borderWidth: '31px',\n        marginTop: '-31px'\n      }\n    }\n  };\n}; // dialogBox: {\n//   width: '150px',\n//   height: '75px',\n//   backgroundColor: '#fff',\n//   color: '#000',\n//   padding: '20px',\n//   position: 'relative',\n//   margin: '40px',\n//   float: 'left',\n//   border: '2px solid black',\n//   borderRadius: '10%',\n//    '&:after': {\n//       content: `\" \"`,\n//       position: 'absolute',\n//       right: '-15px',\n//       top: '15px',\n//       borderTop: '15px solid transparent',\n//       borderRight: 'none',\n//       borderLeft: '15px solid black',\n//       borderBottom: '15px solid transparent',\n//    },\n// .arrow_box {\n// \tposition: relative;\n// \tbackground: #d5d5d5;\n// \tborder: 5px solid #000000;\n// }\n// .arrow_box:after, .arrow_box:before {\n// \tleft: 100%;\n// \ttop: 50%;\n// \tborder: solid transparent;\n// \tcontent: \" \";\n// \theight: 0;\n// \twidth: 0;\n// \tposition: absolute;\n// \tpointer-events: none;\n// }\n// .arrow_box:after {\n// \tborder-color: rgba(213, 213, 213, 0);\n// \tborder-left-color: #d5d5d5;\n// \tborder-width: 25px;\n// \tmargin-top: -25px;\n// }\n// .arrow_box:before {\n// \tborder-color: rgba(0, 0, 0, 0);\n// \tborder-left-color: #000000;\n// \tborder-width: 32px;\n// \tmargin-top: -32px;\n// }\n\n\nvar ActionBar = function ActionBar(_ref) {\n  var classes = _ref.classes,\n      verified = _ref.verified,\n      txid = _ref.txid,\n      terms = _ref.terms,\n      commercialContent = _ref.commercialContent,\n      mediaType = _ref.mediaType,\n      autoPay = _ref.autoPay,\n      amount = _ref.amount,\n      handleClick = _ref.handleClick,\n      purchasedData = _ref.purchasedData;\n  var explorerLink;\n\n  if (config.network === 'testnet') {\n    explorerLink = \"https://testnet.flocha.in/tx/\".concat(txid);\n  } else explorerLink = \"https://livenet.flocha.in/tx/\".concat(txid);\n\n  return __jsx(\"div\", {\n    className: classes.actionBarRoot,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 5\n    }\n  }, __jsx(\"a\", {\n    className: classes.txidHeader,\n    href: explorerLink,\n    target: \"_blank\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }\n  }, __jsx(\"img\", {\n    src: \"https://testnet.flocha.in/img/icons/favicon.ico\",\n    alt: \"transaction: #\".concat(txid),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 9\n    }\n  })), __jsx(LinkRow, {\n    classes: classes,\n    verified: verified,\n    txid: txid,\n    commercialContent: commercialContent,\n    mediaType: mediaType,\n    autoPay: autoPay,\n    amount: amount,\n    handleClick: handleClick,\n    purchasedData: purchasedData,\n    terms: terms,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }\n  }));\n};\n\n_c = ActionBar;\n\nvar ValidIcon = function ValidIcon(_ref2) {\n  var classes = _ref2.classes,\n      confirms = _ref2.confirms,\n      onClick = _ref2.onClick;\n  return __jsx(\"div\", {\n    className: classes.validButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: classes.triangleUp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: classes.confirmsUp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 9\n    }\n  }, confirms));\n};\n\n_c2 = ValidIcon;\n\nvar InValidIcon = function InValidIcon(_ref3) {\n  var classes = _ref3.classes,\n      confirms = _ref3.confirms,\n      onClick = _ref3.onClick;\n  return __jsx(\"div\", {\n    className: classes.validButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: classes.triangleDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: classes.confirmsDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }\n  }, confirms));\n};\n\n_c3 = InValidIcon;\n\nvar DialogBox = function DialogBox(_ref4) {\n  var classes = _ref4.classes;\n  return __jsx(\"div\", {\n    className: classes.dialogBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 5\n    }\n  }, \"Coolbeans\");\n};\n\n_c4 = DialogBox;\n\nvar LinkRow = function LinkRow(_ref5) {\n  var classes = _ref5.classes,\n      verified = _ref5.verified,\n      txid = _ref5.txid,\n      terms = _ref5.terms,\n      commercialContent = _ref5.commercialContent,\n      mediaType = _ref5.mediaType,\n      autoPay = _ref5.autoPay,\n      amount = _ref5.amount,\n      handleClick = _ref5.handleClick,\n      purchasedData = _ref5.purchasedData;\n  var twitter = verified.twitter,\n      gab = verified.gab;\n\n  if (mediaType === undefined) {\n    mediaType = 'other';\n  }\n\n  if (autoPay === undefined) {\n    autoPay = null;\n  }\n\n  if (amount === undefined) {\n    amount = 0;\n  }\n\n  var RenderAutoPay = function RenderAutoPay(_ref6) {\n    var mediaType = _ref6.mediaType,\n        amount = _ref6.amount,\n        autoPay = _ref6.autoPay,\n        handleClick = _ref6.handleClick,\n        purchasedData = _ref6.purchasedData;\n\n    if (!purchasedData) {\n      console.log({\n        purchasedData: purchasedData\n      });\n      return null;\n    }\n\n    if (!(mediaType && autoPay)) {\n      return;\n    }\n\n    if (purchasedData.paid) {\n      return __jsx(React.Fragment, null, __jsx(Link, {\n        passHref: true,\n        href: \"/record?txid=\".concat(txid),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }\n      }, __jsx(\"button\", {\n        className: classes.actionIconButton,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 15\n        }\n      }, __jsx(\"a\", {\n        className: classes.searchLink,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 17\n        }\n      }, \"paid\"))));\n    }\n\n    if (mediaType in autoPay) {\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 17\n        }\n      }, __jsx(\"button\", {\n        className: classes.actionIconButton,\n        style: purchasedData.paid ? {} : {\n          color: 'red'\n        },\n        onClick: function onClick() {\n          return handleClick(txid, terms);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 17\n        }\n      }, __jsx(\"a\", {\n        className: classes.searchLink,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 19\n        }\n      }, purchasedData.paid ? 'paid' : autoPay[mediaType] >= amount ? 'autopay' : \"Pay \".concat(amount, \" FLO\")))));\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: classes.linkRowRoot,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 5\n    }\n  }, gab && __jsx(\"button\", {\n    className: classes.gabButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 9\n    }\n  }, __jsx(\"a\", {\n    className: classes.gabLink,\n    href: \"https://gab.com/OpenIndexProtocol/posts/\".concat(verified.gabId),\n    target: \"_blank\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: '/static/assets/icons/gabSvg.svg',\n    alt: 'gab',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 13\n    }\n  }))), twitter && __jsx(\"button\", {\n    className: classes.twitterButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 9\n    }\n  }, __jsx(\"a\", {\n    className: classes.twitterLink,\n    href: \"https://twitter.com/oip/status/\".concat(verified.twitterId),\n    target: \"_blank\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 11\n    }\n  }, __jsx(FaTwitter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 13\n    }\n  }))), commercialContent ? __jsx(RenderAutoPay, {\n    mediaType: mediaType,\n    amount: amount,\n    autoPay: autoPay,\n    handleClick: handleClick,\n    purchasedData: purchasedData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 11\n    }\n  }) : __jsx(Link, {\n    passHref: true,\n    href: \"/record?txid=\".concat(txid),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }\n  }, __jsx(\"button\", {\n    className: classes.actionIconButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    className: classes.searchLink,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 15\n    }\n  }, \"view\"))));\n};\n\n_c5 = LinkRow;\nvar BASIC = 'tmpl_66089C48';\nvar VIDEO = 'tmpl_4769368E';\nvar PAYMENT = 'tmpl_3084380E';\nvar COMMERICAL = 'tmpl_D8D0F22C';\nvar SIMPCOINSALE = 'tmpl_DE84D583';\n/******************************************* MAIN COMPONENT ******************************************/\n\nvar RecordRow = function RecordRow(_ref7) {\n  _s();\n\n  var classes = _ref7.classes,\n      record = _ref7.record,\n      meta = _ref7.meta,\n      isVerified = _ref7.isVerified,\n      _ref7$showOnlyVerifie = _ref7.showOnlyVerifiedPublishers,\n      showOnlyVerifiedPublishers = _ref7$showOnlyVerifie === void 0 ? false : _ref7$showOnlyVerifie,\n      autoPay = _ref7.autoPay,\n      purchaseRecord = _ref7.purchaseRecord,\n      proofOfPurchase = _ref7.proofOfPurchase;\n  var details = record.details; // tags, payment, permissions\n  // eslint-disable-next-line camelcase\n\n  var signed_by = meta.signed_by;\n\n  var _useState = useState({\n    twitter: false,\n    gab: false\n  }),\n      verified = _useState[0],\n      setVerified = _useState[1];\n\n  var _useState2 = useState({\n    proofTxid: '',\n    data: '',\n    paid: false\n  }),\n      purchasedData = _useState2[0],\n      setPurchasedData = _useState2[1];\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(txid, terms) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              purchaseRecord({\n                txid: txid,\n                terms: terms\n              }).then(function (data) {\n                //   console.log(\"DATA\", data)\n                Router.push(\"/record?txid=\".concat(txid)); //   if(data){\n                //     if(data.id === txid){\n                //       setPurchasedData({\n                //         proofTxid: '',\n                //         data: data,\n                //         paid: true\n                //       })\n                //     }\n                //   }\n              })[\"catch\"](function (err) {\n                return console.log(err);\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleClick(_x, _x2) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var mediaTypes = {\n    audio: knownTemplates.audio,\n    video: knownTemplates.video,\n    image: knownTemplates.image,\n    pdf: knownTemplates.pdf\n  };\n  useEffect(function () {\n    if (autoPay.purchased) {\n      var txid = meta.txid;\n      var found = autoPay.purchased.find(function (purchase) {\n        return purchase.txid === txid;\n      });\n\n      if (found) {\n        var _txid = found.txid,\n            payment_txid = found.payment_txid,\n            terms = found.terms;\n        proofOfPurchase({\n          txid: _txid,\n          payment_txid: payment_txid,\n          terms: terms\n        }).then(function (data) {\n          setPurchasedData({\n            proofTxid: payment_txid,\n            data: data,\n            paid: true\n          });\n        })[\"catch\"](function (err) {\n          return console.log(err);\n        });\n      }\n    }\n  }, []);\n  useEffect(function () {\n    var current = true;\n\n    function verify(_x3) {\n      return _verify.apply(this, arguments);\n    }\n\n    function _verify() {\n      _verify = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pubAddr) {\n        var tmplName, localhost, _yield$isVerified, success, payload;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                localhost = false;\n\n                if (config.network === 'testnet') {\n                  tmplName = 'tmpl_2A46C905'; // verified pub testnet template\n\n                  localhost = true;\n                }\n\n                _context2.next = 4;\n                return isVerified({\n                  pubAddr: pubAddr,\n                  templateName: tmplName,\n                  localhost: localhost\n                });\n\n              case 4:\n                _yield$isVerified = _context2.sent;\n                success = _yield$isVerified.success;\n                payload = _yield$isVerified.payload;\n\n                if (success && current) {\n                  setVerified(payload);\n                }\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _verify.apply(this, arguments);\n    }\n\n    verify(signed_by);\n    return function () {\n      current = false;\n    };\n  }, []);\n  var typeOfMedia; // order template data to start with basic and end with payments\n\n  var tmpDetails = [BASIC, VIDEO].concat(_toConsumableArray(Object.keys(details)), [PAYMENT]);\n  var orderedDetails = [];\n\n  var _iterator = _createForOfIteratorHelper(tmpDetails),\n      _step;\n\n  try {\n    var _loop2 = function _loop2() {\n      var tmpl = _step.value;\n\n      if (!orderedDetails.includes(tmpl)) {\n        orderedDetails.push(tmpl);\n      }\n\n      var _loop3 = function _loop3(media) {\n        mediaTypes[media].find(function (x) {\n          if (x == tmpl) {\n            return typeOfMedia = media;\n          }\n        });\n      };\n\n      for (var media in mediaTypes) {\n        _loop3(media);\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop2();\n    } // get VIDEO and thumbnail\n\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var thumbnail;\n  var ipfsUrl;\n\n  if (Object.keys(details).includes(VIDEO)) {\n    if (details[VIDEO].thumbnailFilename && details[VIDEO].addressDirectory) {\n      ipfsUrl = getIpfsUrl({\n        dirName: details[VIDEO].addressDirectory,\n        filename: details[VIDEO].thumbnailFilename\n      });\n      thumbnail = true;\n    }\n  } // COMMERICAL CONTENT \n\n\n  if (Object.keys(details).includes(COMMERICAL)) {\n    var amount;\n    var txid = meta.txid;\n    var terms;\n\n    var _loop = function _loop(item) {\n      var obj = details[item];\n      Object.keys(obj).map(function (key) {\n        if (key === 'embeddedTerms') {\n          terms = obj[key][0];\n        }\n\n        if (key === 'amount') {\n          return amount = obj[key];\n        }\n      });\n    };\n\n    for (var item in details) {\n      _loop(item);\n    }\n\n    return __jsx(RecordRowData, {\n      classes: classes,\n      meta: meta,\n      thumbnail: thumbnail,\n      ipfsUrl: ipfsUrl,\n      orderedDetails: orderedDetails,\n      details: details // eslint-disable-next-line camelcase\n      ,\n      signed_by: signed_by,\n      verified: verified,\n      commercialContent: true,\n      mediaType: typeOfMedia,\n      autoPay: autoPay,\n      amount: Number(amount),\n      handleClick: handleClick,\n      purchasedData: purchasedData,\n      terms: terms.toString(),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 11\n      }\n    });\n  }\n\n  if (showOnlyVerifiedPublishers) {\n    if (verified.gab || verified.twitter) {\n      return __jsx(RecordRowData, {\n        classes: classes,\n        meta: meta,\n        thumbnail: thumbnail,\n        ipfsUrl: ipfsUrl,\n        orderedDetails: orderedDetails,\n        details: details // eslint-disable-next-line camelcase\n        ,\n        signed_by: signed_by,\n        verified: verified,\n        showExpand: true,\n        commercialContent: false,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 9\n        }\n      });\n    } else return null;\n  }\n\n  return __jsx(RecordRowData, {\n    classes: classes,\n    meta: meta,\n    thumbnail: thumbnail,\n    ipfsUrl: ipfsUrl,\n    orderedDetails: orderedDetails,\n    details: details // eslint-disable-next-line camelcase\n    ,\n    signed_by: signed_by,\n    verified: verified,\n    showExpand: true,\n    commercialContent: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 5\n    }\n  });\n};\n/******************************************* END MAIN COMPONENT ******************************************/\n\n\n_s(RecordRow, \"IZlH+BiZQWyXqIo6DdRFFXId+cc=\");\n\n_c6 = RecordRow;\n\nvar RecordRowData = function RecordRowData(_ref9) {\n  var classes = _ref9.classes,\n      verified = _ref9.verified,\n      details = _ref9.details,\n      meta = _ref9.meta,\n      thumbnail = _ref9.thumbnail,\n      ipfsUrl = _ref9.ipfsUrl,\n      orderedDetails = _ref9.orderedDetails,\n      signed_by = _ref9.signed_by,\n      showExpand = _ref9.showExpand,\n      commercialContent = _ref9.commercialContent,\n      mediaType = _ref9.mediaType,\n      autoPay = _ref9.autoPay,\n      amount = _ref9.amount,\n      handleClick = _ref9.handleClick,\n      purchasedData = _ref9.purchasedData,\n      terms = _ref9.terms;\n  return __jsx(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 689,\n      columnNumber: 5\n    }\n  }, __jsx(ActionBar, {\n    classes: classes,\n    verified: verified,\n    recordDetails: details,\n    txid: meta.txid,\n    commercialContent: commercialContent,\n    mediaType: mediaType,\n    autoPay: autoPay,\n    amount: amount,\n    handleClick: handleClick,\n    purchasedData: purchasedData,\n    terms: terms,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 690,\n      columnNumber: 7\n    }\n  }), __jsx(TableData, {\n    classes: classes,\n    thumbnail: thumbnail,\n    ipfsUrl: ipfsUrl,\n    orderedDetails: orderedDetails,\n    details: details // eslint-disable-next-line camelcase\n    ,\n    signed_by: signed_by,\n    verified: verified,\n    purchasedData: purchasedData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 703,\n      columnNumber: 7\n    }\n  }));\n};\n\n_c7 = RecordRowData;\n\nvar TableData = function TableData(_ref10) {\n  var classes = _ref10.classes,\n      thumbnail = _ref10.thumbnail,\n      ipfsUrl = _ref10.ipfsUrl,\n      orderedDetails = _ref10.orderedDetails,\n      details = _ref10.details,\n      signed_by = _ref10.signed_by,\n      verified = _ref10.verified,\n      purchasedData = _ref10.purchasedData;\n  return __jsx(\"div\", {\n    className: classes.tableData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 744,\n      columnNumber: 5\n    }\n  }, thumbnail && __jsx(Thumbnail, {\n    src: ipfsUrl,\n    classes: classes,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 746,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    className: classes.templateData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 747,\n      columnNumber: 7\n    }\n  }, orderedDetails.map(function (tmpl) {\n    if (!details[tmpl]) return null;\n    return __jsx(TemplateData, {\n      classes: classes,\n      tmpl: tmpl,\n      details: details[tmpl],\n      key: tmpl,\n      purchasedData: purchasedData,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 13\n      }\n    });\n  }), signed_by && __jsx(React.Fragment, null, __jsx(\"span\", {\n    className: classes.templateName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 764,\n      columnNumber: 13\n    }\n  }, \"signed_by:\"), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 765,\n      columnNumber: 13\n    }\n  }, \" \", signed_by)), verified.name && __jsx(\"div\", {\n    style: {\n      marginTop: '7px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    className: classes.templateName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 13\n    }\n  }, \"verified name:\"), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 13\n    }\n  }, \" \", verified.name))));\n};\n\n_c8 = TableData;\n\nvar Thumbnail = function Thumbnail(_ref11) {\n  var src = _ref11.src,\n      classes = _ref11.classes;\n  return __jsx(\"img\", {\n    className: classes.thumbnail,\n    src: src,\n    alt: 'thumbnail',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 781,\n      columnNumber: 10\n    }\n  });\n};\n\n_c9 = Thumbnail;\n\nvar TemplateData = function TemplateData(_ref12) {\n  var classes = _ref12.classes,\n      tmpl = _ref12.tmpl,\n      details = _ref12.details,\n      purchasedData = _ref12.purchasedData;\n  var templateName;\n  var mediaType = '';\n\n  if (knownTemplates[tmpl]) {\n    templateName = knownTemplates[tmpl].friendly_name;\n  } else if (knownTemplates.testnet[tmpl]) {\n    templateName = knownTemplates.testnet[tmpl].friendly_name;\n  } else {\n    templateName = 'Unknown Template';\n  }\n\n  if (tmpl === BASIC) {\n    details = {\n      title: details.title,\n      description: details.description,\n      year: details.year\n    };\n  }\n\n  if (tmpl === VIDEO) {\n    details = {\n      displayName: details.displayName,\n      addressDirectory: details.addressDirectory,\n      filename: details.filename,\n      thumbnailFilename: details.thumbnailFilename,\n      publishDate: details.publishDate\n    };\n  }\n\n  if (tmpl === PAYMENT) {\n    details = _objectSpread({\n      platformCut: details.platformCut,\n      influencerCut: details.influencerCut\n    }, details);\n  }\n\n  if (tmpl === COMMERICAL) {\n    if (purchasedData.paid && purchasedData.data) {\n      details = {\n        location: purchasedData.data.location,\n        network: purchasedData.data.network,\n        embeddedTerms: purchasedData.data.term,\n        valid_until: purchasedData.data.valid_until\n      };\n    } else {\n      details = {\n        embeddedTerms: details.embeddedTerms\n      };\n    }\n  }\n\n  if (tmpl === SIMPCOINSALE) {\n    var coin = details.coin;\n    var flo = 'f9964d1e840608b68a3795fd2597e9b232dfce1029251d481b2110c83a68adf7';\n    var btc = '058bf55be2639673228e1904e2326e13184de08837983cf03cc7fef73ad13d5f';\n    var rvn = '';\n\n    switch (coin) {\n      case flo:\n        details.coin = ' FLO';\n        break;\n\n      case btc:\n        details.coin = ' BTC';\n        break;\n      // case rvn:\n      //   details.coin = ' RVN'\n      //   break;\n    }\n  }\n\n  return __jsx(\"div\", {\n    className: classes.templateDataRow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 853,\n      columnNumber: 5\n    }\n  }, __jsx(\"span\", {\n    className: classes.templateName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 854,\n      columnNumber: 7\n    }\n  }, templateName, \":\"), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 855,\n      columnNumber: 7\n    }\n  }, \" \", tmpl), Object.keys(details).map(function (recordField) {\n    return __jsx(RecordField, {\n      classes: classes,\n      key: recordField,\n      recordField: recordField,\n      recordFieldData: details[recordField],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 858,\n        columnNumber: 11\n      }\n    });\n  }));\n};\n\n_c10 = TemplateData;\n\nvar RecordField = function RecordField(_ref13) {\n  var classes = _ref13.classes,\n      recordField = _ref13.recordField,\n      recordFieldData = _ref13.recordFieldData;\n\n  if (!recordFieldData) {\n    return null;\n  }\n\n  if (recordFieldData.raw) {\n    recordFieldData = recordFieldData.raw;\n  }\n\n  return __jsx(\"div\", {\n    className: classes.recordFieldRow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 879,\n      columnNumber: 5\n    }\n  }, __jsx(\"span\", {\n    className: classes.recordField,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 880,\n      columnNumber: 7\n    }\n  }, recordField, \":\"), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 881,\n      columnNumber: 7\n    }\n  }, \" \", recordFieldData));\n};\n\n_c11 = RecordField;\nRecordRow.propTypes = {\n  classes: PropTypes.object.isRequired,\n  record: PropTypes.object.isRequired,\n  meta: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    autoPay: state.Autopay\n  };\n}\n\nexport default connect(mapStateToProps, {\n  purchaseRecord: purchaseRecord,\n  proofOfPurchase: proofOfPurchase,\n  updatePurchasedTxid: updatePurchasedTxid\n})(withStyles(styles)(RecordRow));\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n\n$RefreshReg$(_c, \"ActionBar\");\n$RefreshReg$(_c2, \"ValidIcon\");\n$RefreshReg$(_c3, \"InValidIcon\");\n$RefreshReg$(_c4, \"DialogBox\");\n$RefreshReg$(_c5, \"LinkRow\");\n$RefreshReg$(_c6, \"RecordRow\");\n$RefreshReg$(_c7, \"RecordRowData\");\n$RefreshReg$(_c8, \"TableData\");\n$RefreshReg$(_c9, \"Thumbnail\");\n$RefreshReg$(_c10, \"TemplateData\");\n$RefreshReg$(_c11, \"RecordField\");","map":{"version":3,"sources":["/Users/martinadams/Desktop/FLO-OIP projects/DDX/oip-ddx-light/frontend/components/views/dumb/recordRow/RecordRow.js"],"names":["React","useState","useEffect","withStyles","PropTypes","Link","Router","FaTwitter","config","knownTemplates","getIpfsUrl","connect","purchaseRecord","proofOfPurchase","updatePurchasedTxid","styles","theme","root","display","flexDirection","overflow","wordBreak","borderTop","palette","greyscale","padding","fontSize","boxSizing","tableData","width","thumbnail","paddingRight","paddingBottom","marginTop","templateData","templateDataRow","margin","templateName","backgroundColor","primary","main","fontWeight","color","recordField","recordFieldRow","actionBarRoot","flex","alignItems","justifyContent","actionIcon","cursor","txidHeader","outline","textDecoration","tertiary","transition","transform","linkRowRoot","actionIconButton","border","borderRadius","marginLeft","searchLink","height","twitterButton","extend","borderColor","twitterLink","gabButton","gabLink","validButton","alignSelf","triangleUp","borderLeft","borderRight","borderBottom","triangleDown","confirmsUp","position","right","top","confirmsDown","dialogBox","background","left","content","pointerEvents","borderLeftColor","borderWidth","ActionBar","classes","verified","txid","terms","commercialContent","mediaType","autoPay","amount","handleClick","purchasedData","explorerLink","network","ValidIcon","confirms","onClick","InValidIcon","DialogBox","LinkRow","twitter","gab","undefined","RenderAutoPay","console","log","paid","gabId","twitterId","BASIC","VIDEO","PAYMENT","COMMERICAL","SIMPCOINSALE","RecordRow","record","meta","isVerified","showOnlyVerifiedPublishers","details","signed_by","setVerified","proofTxid","data","setPurchasedData","then","push","err","mediaTypes","audio","video","image","pdf","purchased","found","find","purchase","payment_txid","current","verify","pubAddr","localhost","tmplName","success","payload","typeOfMedia","tmpDetails","Object","keys","orderedDetails","tmpl","includes","media","x","ipfsUrl","thumbnailFilename","addressDirectory","dirName","filename","item","obj","map","key","Number","toString","RecordRowData","showExpand","TableData","name","Thumbnail","src","TemplateData","friendly_name","testnet","title","description","year","displayName","publishDate","platformCut","influencerCut","location","embeddedTerms","term","valid_until","coin","flo","btc","rvn","RecordField","recordFieldData","raw","propTypes","object","isRequired","mapStateToProps","state","Autopay"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport withStyles from 'react-jss';\nimport PropTypes from 'prop-types';\nimport Link from 'next/link';\nimport Router from 'next/router'\nimport { FaTwitter } from 'react-icons/fa';\nimport config from '../config.js';\nimport knownTemplates from '../../templates/knownTemplates';\nimport getIpfsUrl from '../helpers/getIpfsUrl';\nimport { connect } from 'react-redux';\nimport { purchaseRecord, proofOfPurchase } from '../../redux/actions/Wallet/thunks.js'\nimport { updatePurchasedTxid } from '../../redux/actions/Autopay/creators'\n\n\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    overflow: 'hidden',\n    wordBreak: 'break-word',\n    borderTop: `1px solid ${theme.palette.greyscale(0.3)}`,\n    padding: 10,\n    fontSize: 12,\n    boxSizing: 'border-box'\n  },\n  tableData: {\n    width: '100%'\n  },\n  thumbnail: {\n    width: 300,\n    float: 'right',\n    paddingRight: 16,\n    paddingBottom: 10,\n    marginTop: 10\n  },\n  templateData: {},\n  templateDataRow: {\n    // width: 30\n    margin: [7, 0]\n  },\n  templateName: {\n    backgroundColor: theme.palette.primary.main,\n    fontWeight: '600',\n    color: 'white',\n    padding: [3, 4]\n  },\n  recordField: {\n    fontWeight: '600',\n    color: theme.palette.greyscale(0.9),\n    padding: [2, 4]\n  },\n  recordFieldRow: {\n    margin: [7, 16]\n  },\n  actionBarRoot: {\n    display: 'flex',\n    flex: '0 0 30px',\n    alignItems: 'center',\n    justifyContent: 'flex-end'\n  },\n  actionIcon: {\n    cursor: 'pointer'\n  },\n  txidHeader: {\n    fontSize: 12,\n    color: theme.palette.primary.main,\n    outline: 'none',\n    textDecoration: 'none',\n    '&:visited': {\n      color: theme.palette.tertiary.main\n    },\n    transition: 'all .2s ease-in-out',\n    '&:hover': {\n      transform: 'scale(1.1)'\n    }\n  },\n  linkRowRoot: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  actionIconButton: {\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'transparent',\n    padding: [3, 7],\n    border: '1px solid',\n    borderRadius: 3,\n    marginLeft: 7,\n    '&:hover': {\n      cursor: 'pointer'\n      // backgroundColor: 'black',\n      // color: 'white'\n    }\n  },\n  searchLink: {\n    display: 'inherit',\n    '& > img': {\n      height: 13\n    }\n  },\n  twitterButton: {\n    extend: 'actionIconButton',\n    borderColor: '#1DA1F2',\n    '&:hover': {\n      backgroundColor: '#1DA1F2',\n      '& > $twitterLink': {\n        color: 'white'\n      }\n    }\n  },\n  twitterLink: {\n    display: 'flex',\n    color: '#1DA1F2',\n    borderColor: '#1DA1F2',\n    backgroundColor: 'transparent'\n  },\n  gabButton: {\n    extend: 'actionIconButton',\n    borderColor: '#00D384',\n    '&:hover': {\n      // backgroundColor: '#1DA1F2',\n      '& > $twitterLink': {\n        // color: 'white'\n      }\n    }\n  },\n  gabLink: {\n    display: 'flex',\n    // color: '#1DA1F2',\n    // borderColor: '#1DA1F2',\n    backgroundColor: 'transparent',\n    '& > img': {\n      height: 14\n    }\n  },\n  validButton: {\n    display: 'flex',\n    alignSelf: 'flex-end',\n    border: '.5em solid black',\n    borderRadius: '10%',\n    height: '2rem',\n    width: '2rem',\n    padding: '2px',\n    cursor: 'pointer',\n    transition:  'all .2s ease-in-out',\n    '&:hover': {\n      transform: 'scale(1.05)'\n    }\n  },\n  triangleUp: {\n    width: '0',\n    height: '0',\n    borderLeft: '1rem solid transparent',\n    borderRight: '1rem solid transparent',\n    borderBottom: '2rem solid rgb(13,112,16)'\n  },\n  triangleDown: {\n    width: '0',\n    height: '0',\n    borderLeft: '1rem solid transparent',\n    borderRight: '1rem solid transparent',\n    borderTop: '2rem solid rgb(179,27,17)'\n  },\n  confirmsUp: {\n    color: '#fff',\n    fontSize: '1.25rem',\n    position: 'relative',\n    right: '72%',\n    top: '25%'\n  },\n  confirmsDown: {\n    color: '#fff',\n    fontSize: '1.25rem',\n    position: 'relative',\n    right: '72%',\n    top: '0%'\n  },\n  dialogBox: {\n    position: 'relative',\n    background: '#fff',\n    border: '4px solid #000',\n    height: '6rem',\n    width: '8rem',\n    padding: '2rem',\n    borderRadius: '5%',\n      '&:after,&:before': {\n        left: '100%',\n        top: '35%',\n        border: 'solid transparent',\n        content: `\" \"`,\n        height: '0',\n        width: '0',\n        position: 'absolute',\n        pointerEvents: 'none',\n      },\n      '&:after': {\n        borderColor: 'rgba(213,213,213,0)',\n        borderLeftColor: '#fff',\n        borderWidth: '25px',\n        marginTop: '-25px',\n      },\n      '&:before': {\n        borderColor: 'rgba(0,0,0,0)',\n        borderLeftColor: '#000',\n        borderWidth: '31px',\n        marginTop: '-31px',\n      },\n  }\n})\n\n\n\n// dialogBox: {\n  //   width: '150px',\n  //   height: '75px',\n  //   backgroundColor: '#fff',\n  //   color: '#000',\n  //   padding: '20px',\n  //   position: 'relative',\n  //   margin: '40px',\n  //   float: 'left',\n  //   border: '2px solid black',\n  //   borderRadius: '10%',\n  //    '&:after': {\n  //       content: `\" \"`,\n  //       position: 'absolute',\n  //       right: '-15px',\n  //       top: '15px',\n  //       borderTop: '15px solid transparent',\n  //       borderRight: 'none',\n  //       borderLeft: '15px solid black',\n  //       borderBottom: '15px solid transparent',\n  //    },\n\n\n// .arrow_box {\n// \tposition: relative;\n// \tbackground: #d5d5d5;\n// \tborder: 5px solid #000000;\n// }\n// .arrow_box:after, .arrow_box:before {\n// \tleft: 100%;\n// \ttop: 50%;\n// \tborder: solid transparent;\n// \tcontent: \" \";\n// \theight: 0;\n// \twidth: 0;\n// \tposition: absolute;\n// \tpointer-events: none;\n// }\n\n// .arrow_box:after {\n// \tborder-color: rgba(213, 213, 213, 0);\n// \tborder-left-color: #d5d5d5;\n// \tborder-width: 25px;\n// \tmargin-top: -25px;\n// }\n// .arrow_box:before {\n// \tborder-color: rgba(0, 0, 0, 0);\n// \tborder-left-color: #000000;\n// \tborder-width: 32px;\n// \tmargin-top: -32px;\n// }\n\n\n\n\nconst ActionBar = ({ classes, verified, txid, terms, commercialContent, mediaType, autoPay, amount, handleClick, purchasedData }) => {\n\n  let explorerLink;\n  if (config.network === 'testnet') {\n    explorerLink = `https://testnet.flocha.in/tx/${txid}`;\n  } else explorerLink = `https://livenet.flocha.in/tx/${txid}`;\n\n  return (\n    <div className={classes.actionBarRoot}>\n      <a className={classes.txidHeader} href={explorerLink} target='_blank'>\n        <img\n          src='https://testnet.flocha.in/img/icons/favicon.ico'\n          alt={`transaction: #${txid}`}\n        />\n      </a>\n      <LinkRow classes={classes} verified={verified} txid={txid} commercialContent={commercialContent} mediaType={mediaType} autoPay={autoPay} amount={amount} handleClick={handleClick} purchasedData={purchasedData} terms={terms} />\n    </div>\n  );\n};\n\n\n\nconst ValidIcon = ({classes, confirms, onClick}) => {\n  return ( \n    <div className={classes.validButton}>\n\n        <div className={classes.triangleUp}></div>\n        <div className={classes.confirmsUp}>{confirms}</div>\n    </div>\n  );\n}\nconst InValidIcon = ({classes, confirms, onClick}) => {\n  return ( \n    <div className={classes.validButton}>\n\n        <div className={classes.triangleDown}></div>\n        <div className={classes.confirmsDown}>{confirms}</div>\n    </div>\n  );\n}\n\nconst DialogBox = ({ classes }) => {\n  return (\n    <div className={classes.dialogBox}>\n      Coolbeans\n    </div>\n  )\n}\n\n\nconst LinkRow = ({ classes, verified, txid, terms, commercialContent, mediaType, autoPay, amount, handleClick, purchasedData }) => {\n  const { twitter, gab } = verified;\n\n\n  if(mediaType === undefined){\n    mediaType = 'other'\n  }\n  if(autoPay === undefined){\n    autoPay = null\n  }\n\n  if(amount === undefined){\n    amount = 0;\n  }\n  \n\n  const RenderAutoPay = ({mediaType, amount, autoPay, handleClick, purchasedData }) => {\n\n    if(!purchasedData){\n      console.log({purchasedData})\n      return null\n    }\n\n    if(!(mediaType && autoPay)){\n          return \n      }\n\n      if(purchasedData.paid){\n        return (\n          <>\n              <Link passHref href={`/record?txid=${txid}`} >\n              <button className={classes.actionIconButton}>\n                <a className={classes.searchLink}>\n                  {/* <img src={'/static/assets/icons/expand.png'} alt={'expand'} /> */}\n                    paid\n                </a>\n              </button>\n            </Link>\n          </>\n        )\n      }\n\n      if(mediaType in autoPay){\n\n          return (\n            <>\n            {/* passHref href={`/record?txid=${txid}`} */}\n                <div  >\n                <button className={classes.actionIconButton} style={ purchasedData.paid ? {} : {color: 'red'}} \n                    onClick={() => handleClick(txid, terms)} >\n                  <a className={classes.searchLink}>\n                    {/* <img src={'/static/assets/icons/expand.png'} alt={'expand'} /> */}\n                      {purchasedData.paid \n                        ? 'paid'\n                        : autoPay[mediaType] >= amount ? 'autopay' : `Pay ${amount} FLO`\n                      }\n                  </a>\n                </button>\n              </div>\n            </>\n          )            \n      }\n\n\n  }\n\n  return (\n    <div className={classes.linkRowRoot}>\n      {gab && (\n        <button className={classes.gabButton}>\n          <a\n            className={classes.gabLink}\n            href={`https://gab.com/OpenIndexProtocol/posts/${verified.gabId}`}\n            target='_blank'>\n            <img src={'/static/assets/icons/gabSvg.svg'} alt={'gab'} />\n          </a>\n        </button>\n      )}\n      {twitter && (\n        <button className={classes.twitterButton}>\n          <a\n            className={classes.twitterLink}\n            href={`https://twitter.com/oip/status/${verified.twitterId}`}\n            target='_blank'>\n            <FaTwitter />\n          </a>\n        </button>\n      )}\n      {commercialContent ? (\n          <RenderAutoPay \n              mediaType={mediaType}\n              amount={amount}\n              autoPay={autoPay}\n              handleClick={handleClick}\n              purchasedData={purchasedData}\n          />\n      ) :\n        <Link passHref href={`/record?txid=${txid}`}>\n            <button className={classes.actionIconButton}>\n              <a className={classes.searchLink}>\n                {/* <img src={'/static/assets/icons/expand.png'} alt={'expand'} /> */}\n                  view\n              </a>\n            </button>\n        </Link>\n      }\n\n\n    </div>\n  );\n};\n\nconst BASIC = 'tmpl_66089C48';\nconst VIDEO = 'tmpl_4769368E';\nconst PAYMENT = 'tmpl_3084380E';\nconst COMMERICAL = 'tmpl_D8D0F22C';\nconst SIMPCOINSALE = 'tmpl_DE84D583'\n\n/******************************************* MAIN COMPONENT ******************************************/ \nconst RecordRow = ({\n  classes,\n  record,\n  meta,\n  isVerified,\n  showOnlyVerifiedPublishers = false,\n  autoPay,\n  purchaseRecord,\n  proofOfPurchase,\n\n}) => {\n  const { details } = record; // tags, payment, permissions\n  // eslint-disable-next-line camelcase\n  const { signed_by } = meta;\n\n  const [verified, setVerified] = useState({ twitter: false, gab: false });\n\n  const [purchasedData, setPurchasedData] = useState({\n      proofTxid: '',\n      data: '',\n      paid: false\n  })\n\n  const handleClick = async (txid, terms) => {\n\n    purchaseRecord({txid, terms})\n      .then(data => {\n      //   console.log(\"DATA\", data)\n\n      Router.push(`/record?txid=${txid}`)\n      //   if(data){\n      //     if(data.id === txid){\n      //       setPurchasedData({\n      //         proofTxid: '',\n      //         data: data,\n      //         paid: true\n      //       })\n      //     }\n      //   }\n      })\n      .catch(err => console.log(err))\n\n\n  }\n\n  let mediaTypes = {\n    audio: knownTemplates.audio,\n    video: knownTemplates.video,\n    image: knownTemplates.image,\n    pdf: knownTemplates.pdf,\n  }\n\n  \n\n\nuseEffect(() => {\n  if(autoPay.purchased){\n    let { txid } = meta\n\n    let found = autoPay.purchased.find(purchase => {\n       return purchase.txid === txid\n    })\n    \n    if(found){\n      let {txid, payment_txid, terms } = found\n      proofOfPurchase({txid, payment_txid, terms })\n      .then(data => {\n        setPurchasedData({\n          proofTxid: payment_txid,\n          data: data,\n          paid: true\n        })})\n      .catch(err => console.log(err))\n    }\n  }\n}, [])\n\n\n\n  useEffect(() => {\n    let current = true;\n    async function verify(pubAddr) {\n      let tmplName;\n      let localhost = false;\n      if (config.network === 'testnet') {\n        tmplName = 'tmpl_2A46C905'; // verified pub testnet template\n        localhost = true;\n      }\n      const { success, payload } = await isVerified({\n        pubAddr,\n        templateName: tmplName,\n        localhost\n      });\n      if (success && current) {\n        setVerified(payload);\n      }\n    }\n\n    verify(signed_by);\n    return () => {\n      current = false;\n    };\n  }, []);\n\n\n\n  let typeOfMedia;\n\n  // order template data to start with basic and end with payments\n  let tmpDetails = [BASIC, VIDEO, ...Object.keys(details), PAYMENT];\n  let orderedDetails = [];\n  for (let tmpl of tmpDetails) {\n    if (!orderedDetails.includes(tmpl)) {\n      orderedDetails.push(tmpl);\n    }\n\n    for (const media in mediaTypes) {\n      mediaTypes[media].find(x => {\n    if(x == tmpl){\n      return typeOfMedia = media;\n    }\n})\n}\n  }\n  \n\n  // get VIDEO and thumbnail\n  let thumbnail;\n  let ipfsUrl;\n  if (Object.keys(details).includes(VIDEO)) {\n    if (details[VIDEO].thumbnailFilename && details[VIDEO].addressDirectory) {\n      ipfsUrl = getIpfsUrl({\n        dirName: details[VIDEO].addressDirectory,\n        filename: details[VIDEO].thumbnailFilename\n      });\n      thumbnail = true;\n    }\n  }\n\n  // COMMERICAL CONTENT \n  if (Object.keys(details).includes(COMMERICAL)) {\n\n\n    let amount;\n    let { txid } = meta;\n    let terms;\n    \n    for (const item in details){\n        let obj = details[item]\n\n\n\n        Object.keys(obj).map(key => {\n            if(key === 'embeddedTerms'){\n              terms = obj[key][0]\n            }\n\n            if(key === 'amount'){\n               return amount = obj[key]\n            }\n        })\n    }\n        return (\n          <RecordRowData\n            classes={classes}\n            meta={meta}\n            thumbnail={thumbnail}\n            ipfsUrl={ipfsUrl}\n            orderedDetails={orderedDetails}\n            details={details}\n            // eslint-disable-next-line camelcase\n            signed_by={signed_by}\n            verified={verified}\n            commercialContent={true}\n            mediaType={typeOfMedia}\n            autoPay={autoPay}\n            amount={Number(amount)}\n            handleClick={handleClick}\n            purchasedData={purchasedData}\n            terms={(terms).toString()}\n          />\n        );\n  }\n\n  \n\n  if (showOnlyVerifiedPublishers) {\n    if (verified.gab || verified.twitter) {\n      return (\n        <RecordRowData\n          classes={classes}\n          meta={meta}\n          thumbnail={thumbnail}\n          ipfsUrl={ipfsUrl}\n          orderedDetails={orderedDetails}\n          details={details}\n          // eslint-disable-next-line camelcase\n          signed_by={signed_by}\n          verified={verified}\n          showExpand={true}\n          commercialContent={false}\n\n        />\n      );\n    } else return null;\n  }\n  return (\n    <RecordRowData\n      classes={classes}\n      meta={meta}\n      thumbnail={thumbnail}\n      ipfsUrl={ipfsUrl}\n      orderedDetails={orderedDetails}\n      details={details}\n      // eslint-disable-next-line camelcase\n      signed_by={signed_by}\n      verified={verified}\n      showExpand={true}\n      commercialContent={false}\n    />\n  );\n};\n\n\n/******************************************* END MAIN COMPONENT ******************************************/ \n\n\nconst RecordRowData = ({\n  classes,\n  verified,\n  details,\n  meta,\n  thumbnail,\n  ipfsUrl,\n  orderedDetails,\n  // eslint-disable-next-line camelcase\n  signed_by,\n  showExpand,\n  commercialContent,\n  mediaType,\n  autoPay,\n  amount,\n  handleClick,\n  purchasedData,\n  terms\n\n}) => {\n\n\n  return (\n    <div className={classes.root}>\n      <ActionBar\n        classes={classes}\n        verified={verified}\n        recordDetails={details}\n        txid={meta.txid}\n        commercialContent={commercialContent}\n        mediaType={mediaType}\n        autoPay={autoPay}\n        amount={amount}\n        handleClick={handleClick}\n        purchasedData={purchasedData}\n        terms={terms}       \n      />  \n      <TableData\n        classes={classes}\n        thumbnail={thumbnail}\n        ipfsUrl={ipfsUrl}\n        orderedDetails={orderedDetails}\n        details={details}\n        // eslint-disable-next-line camelcase\n        signed_by={signed_by}\n        verified={verified}\n        purchasedData={purchasedData}\n      />\n      {/* TODO  - EDDIE */}\n       {/* <ValidIcon \n          classes={classes}\n          confirms={4}\n       />\n       <InValidIcon \n          classes={classes}\n          confirms={4}\n       /> */}\n\n\n       \n\n    </div>\n  );\n};\n\nconst TableData = ({\n  classes,\n  thumbnail,\n  ipfsUrl,\n  orderedDetails,\n  details,\n  // eslint-disable-next-line camelcase\n  signed_by,\n  verified,\n  purchasedData\n}) => {\n\n  return (\n    <div className={classes.tableData}>\n      {/* thumbnail here */}\n      {thumbnail && <Thumbnail src={ipfsUrl} classes={classes} />}\n      <div className={classes.templateData}>\n        {orderedDetails.map(tmpl => {\n          if (!details[tmpl]) return null;\n          return (\n            <TemplateData\n              classes={classes}\n              tmpl={tmpl}\n              details={details[tmpl]}\n              key={tmpl}\n              purchasedData={purchasedData}\n            />\n          );\n        })}\n        {/* eslint-disable-next-line camelcase */}\n        {signed_by && (\n          <>\n            {/* eslint-disable-next-line camelcase */}\n            <span className={classes.templateName}>signed_by:</span>\n            <span> {signed_by}</span>\n          </>\n        )}\n        {verified.name && (\n          <div style={{ marginTop: '7px' }}>\n            {/* eslint-disable-next-line camelcase */}\n            <span className={classes.templateName}>verified name:</span>\n            <span> {verified.name}</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst Thumbnail = ({ src, classes }) => {\n  return <img className={classes.thumbnail} src={src} alt={'thumbnail'} />;\n};\n\nconst TemplateData = ({ classes, tmpl, details, purchasedData}) => {\n  let templateName;\n  let mediaType = ''\n\n\n  if (knownTemplates[tmpl]) {\n    templateName = knownTemplates[tmpl].friendly_name;\n  } else if (knownTemplates.testnet[tmpl]) {\n    templateName = knownTemplates.testnet[tmpl].friendly_name;\n  } else {\n    templateName = 'Unknown Template';\n  }\n  if (tmpl === BASIC) {\n    details = {\n      title: details.title,\n      description: details.description,\n      year: details.year\n    };\n  }\n  if (tmpl === VIDEO) {\n    details = {\n      displayName: details.displayName,\n      addressDirectory: details.addressDirectory,\n      filename: details.filename,\n      thumbnailFilename: details.thumbnailFilename,\n      publishDate: details.publishDate\n    };\n  }\n  if (tmpl === PAYMENT) {\n    details = {\n      platformCut: details.platformCut,\n      influencerCut: details.influencerCut,\n      ...details\n    };\n  }\n  if(tmpl === COMMERICAL){\n    if(purchasedData.paid && purchasedData.data){\n      details = {\n        location: purchasedData.data.location,\n        network: purchasedData.data.network,\n        embeddedTerms: purchasedData.data.term,\n        valid_until: purchasedData.data.valid_until\n      }\n      } else {\n        details = {\n          embeddedTerms: details.embeddedTerms,\n        }\n      }\n  }\n  if(tmpl === SIMPCOINSALE){\n    let coin = details.coin\n    let flo = 'f9964d1e840608b68a3795fd2597e9b232dfce1029251d481b2110c83a68adf7'\n    let btc = '058bf55be2639673228e1904e2326e13184de08837983cf03cc7fef73ad13d5f'\n    let rvn = ''\n    \n    switch(coin){\n      case flo:\n        details.coin = ' FLO'\n        break;\n      case btc:\n        details.coin = ' BTC'\n        break;\n      // case rvn:\n      //   details.coin = ' RVN'\n      //   break;\n    }\n\n  }\n  return (\n    <div className={classes.templateDataRow}>\n      <span className={classes.templateName}>{templateName}:</span>\n      <span> {tmpl}</span>\n      {Object.keys(details).map(recordField => {\n        return (\n          <RecordField\n            classes={classes}\n            key={recordField}\n            recordField={recordField}\n            recordFieldData={details[recordField]}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nconst RecordField = ({ classes, recordField, recordFieldData }) => {\n\n  if (!recordFieldData) {\n    return null;\n  }\n  if (recordFieldData.raw) {\n    recordFieldData = recordFieldData.raw;\n  }\n  return (\n    <div className={classes.recordFieldRow}>\n      <span className={classes.recordField}>{recordField}:</span>\n      <span> {recordFieldData}</span>\n    </div>\n  );\n};\n\n\n\nRecordRow.propTypes = {\n  classes: PropTypes.object.isRequired,\n  record: PropTypes.object.isRequired,\n  meta: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps (state) {\n  return {\n      autoPay: state.Autopay\n  }\n}\n\n\nexport default connect(mapStateToProps, { purchaseRecord, proofOfPurchase, updatePurchasedTxid })(withStyles(styles)(RecordRow))\n"]},"metadata":{},"sourceType":"module"}