{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState, useEffect } from 'react';\nimport withStyles from 'react-jss';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { FaTwitter } from 'react-icons/fa';\nimport config from '../../../../config.js';\nimport knownTemplates from '../../../../templates/knownTemplates';\nimport getIpfsUrl from '../../../../helpers/getIpfsUrl';\nimport { connect } from 'react-redux';\nimport { purchaseRecord, proofOfPurchase } from '../../../../redux/actions/Wallet/thunks.js';\nimport { updatePurchasedTxid } from '../../../../redux/actions/Autopay/creators';\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      wordBreak: 'break-word',\n      borderTop: \"1px solid \".concat(theme.palette.greyscale(0.3)),\n      padding: 10,\n      fontSize: 12,\n      boxSizing: 'border-box'\n    },\n    tableData: {\n      width: '100%'\n    },\n    thumbnail: {\n      width: 300,\n      \"float\": 'right',\n      paddingRight: 16,\n      paddingBottom: 10,\n      marginTop: 10\n    },\n    templateData: {},\n    templateDataRow: {\n      // width: 30\n      margin: [7, 0]\n    },\n    templateName: {\n      backgroundColor: theme.palette.primary.main,\n      fontWeight: '600',\n      color: 'white',\n      padding: [3, 4]\n    },\n    recordField: {\n      fontWeight: '600',\n      color: theme.palette.greyscale(0.9),\n      padding: [2, 4]\n    },\n    recordFieldRow: {\n      margin: [7, 16]\n    },\n    actionBarRoot: {\n      display: 'flex',\n      flex: '0 0 30px',\n      alignItems: 'center',\n      justifyContent: 'flex-end'\n    },\n    actionIcon: {\n      cursor: 'pointer'\n    },\n    txidHeader: {\n      fontSize: 12,\n      color: theme.palette.primary.main,\n      outline: 'none',\n      textDecoration: 'none',\n      '&:visited': {\n        color: theme.palette.tertiary.main\n      },\n      transition: 'all .2s ease-in-out',\n      '&:hover': {\n        transform: 'scale(1.1)'\n      }\n    },\n    linkRowRoot: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    actionIconButton: {\n      display: 'flex',\n      alignItems: 'center',\n      backgroundColor: 'transparent',\n      padding: [3, 7],\n      border: '1px solid',\n      borderRadius: 3,\n      marginLeft: 7,\n      '&:hover': {\n        cursor: 'pointer' // backgroundColor: 'black',\n        // color: 'white'\n\n      }\n    },\n    searchLink: {\n      display: 'inherit',\n      '& > img': {\n        height: 13\n      }\n    },\n    twitterButton: {\n      extend: 'actionIconButton',\n      borderColor: '#1DA1F2',\n      '&:hover': {\n        backgroundColor: '#1DA1F2',\n        '& > $twitterLink': {\n          color: 'white'\n        }\n      }\n    },\n    twitterLink: {\n      display: 'flex',\n      color: '#1DA1F2',\n      borderColor: '#1DA1F2',\n      backgroundColor: 'transparent'\n    },\n    gabButton: {\n      extend: 'actionIconButton',\n      borderColor: '#00D384',\n      '&:hover': {\n        // backgroundColor: '#1DA1F2',\n        '& > $twitterLink': {// color: 'white'\n        }\n      }\n    },\n    gabLink: {\n      display: 'flex',\n      // color: '#1DA1F2',\n      // borderColor: '#1DA1F2',\n      backgroundColor: 'transparent',\n      '& > img': {\n        height: 14\n      }\n    },\n    validButton: {\n      display: 'flex',\n      alignSelf: 'flex-end',\n      border: '.5em solid black',\n      borderRadius: '10%',\n      height: '2rem',\n      width: '2rem',\n      padding: '2px',\n      cursor: 'pointer',\n      transition: 'all .2s ease-in-out',\n      '&:hover': {\n        transform: 'scale(1.05)'\n      }\n    },\n    triangleUp: {\n      width: '0',\n      height: '0',\n      borderLeft: '1rem solid transparent',\n      borderRight: '1rem solid transparent',\n      borderBottom: '2rem solid rgb(13,112,16)'\n    },\n    triangleDown: {\n      width: '0',\n      height: '0',\n      borderLeft: '1rem solid transparent',\n      borderRight: '1rem solid transparent',\n      borderTop: '2rem solid rgb(179,27,17)'\n    },\n    confirmsUp: {\n      color: '#fff',\n      fontSize: '1.25rem',\n      position: 'relative',\n      right: '72%',\n      top: '25%'\n    },\n    confirmsDown: {\n      color: '#fff',\n      fontSize: '1.25rem',\n      position: 'relative',\n      right: '72%',\n      top: '0%'\n    },\n    dialogBox: {\n      position: 'relative',\n      background: '#fff',\n      border: '4px solid #000',\n      height: '6rem',\n      width: '8rem',\n      padding: '2rem',\n      borderRadius: '5%',\n      '&:after,&:before': {\n        left: '100%',\n        top: '35%',\n        border: 'solid transparent',\n        content: \"\\\" \\\"\",\n        height: '0',\n        width: '0',\n        position: 'absolute',\n        pointerEvents: 'none'\n      },\n      '&:after': {\n        borderColor: 'rgba(213,213,213,0)',\n        borderLeftColor: '#fff',\n        borderWidth: '25px',\n        marginTop: '-25px'\n      },\n      '&:before': {\n        borderColor: 'rgba(0,0,0,0)',\n        borderLeftColor: '#000',\n        borderWidth: '31px',\n        marginTop: '-31px'\n      }\n    }\n  };\n}; // dialogBox: {\n//   width: '150px',\n//   height: '75px',\n//   backgroundColor: '#fff',\n//   color: '#000',\n//   padding: '20px',\n//   position: 'relative',\n//   margin: '40px',\n//   float: 'left',\n//   border: '2px solid black',\n//   borderRadius: '10%',\n//    '&:after': {\n//       content: `\" \"`,\n//       position: 'absolute',\n//       right: '-15px',\n//       top: '15px',\n//       borderTop: '15px solid transparent',\n//       borderRight: 'none',\n//       borderLeft: '15px solid black',\n//       borderBottom: '15px solid transparent',\n//    },\n// .arrow_box {\n// \tposition: relative;\n// \tbackground: #d5d5d5;\n// \tborder: 5px solid #000000;\n// }\n// .arrow_box:after, .arrow_box:before {\n// \tleft: 100%;\n// \ttop: 50%;\n// \tborder: solid transparent;\n// \tcontent: \" \";\n// \theight: 0;\n// \twidth: 0;\n// \tposition: absolute;\n// \tpointer-events: none;\n// }\n// .arrow_box:after {\n// \tborder-color: rgba(213, 213, 213, 0);\n// \tborder-left-color: #d5d5d5;\n// \tborder-width: 25px;\n// \tmargin-top: -25px;\n// }\n// .arrow_box:before {\n// \tborder-color: rgba(0, 0, 0, 0);\n// \tborder-left-color: #000000;\n// \tborder-width: 32px;\n// \tmargin-top: -32px;\n// }\n\n\nvar ActionBar = function ActionBar(_ref) {\n  var classes = _ref.classes,\n      verified = _ref.verified,\n      txid = _ref.txid,\n      terms = _ref.terms,\n      commercialContent = _ref.commercialContent,\n      mediaType = _ref.mediaType,\n      autoPay = _ref.autoPay,\n      amount = _ref.amount,\n      handleClick = _ref.handleClick,\n      purchasedData = _ref.purchasedData;\n  var explorerLink;\n\n  if (config.network === 'testnet') {\n    explorerLink = \"https://testnet.flocha.in/tx/\".concat(txid);\n  } else explorerLink = \"https://livenet.flocha.in/tx/\".concat(txid);\n\n  return __jsx(\"div\", {\n    className: classes.actionBarRoot\n  }, __jsx(\"a\", {\n    className: classes.txidHeader,\n    href: explorerLink,\n    target: \"_blank\"\n  }, __jsx(\"img\", {\n    src: \"https://testnet.flocha.in/img/icons/favicon.ico\",\n    alt: \"transaction: #\".concat(txid)\n  })), __jsx(LinkRow, {\n    classes: classes,\n    verified: verified,\n    txid: txid,\n    commercialContent: commercialContent,\n    mediaType: mediaType,\n    autoPay: autoPay,\n    amount: amount,\n    handleClick: handleClick,\n    purchasedData: purchasedData,\n    terms: terms\n  }));\n};\n\nvar ValidIcon = function ValidIcon(_ref2) {\n  var classes = _ref2.classes,\n      confirms = _ref2.confirms,\n      onClick = _ref2.onClick;\n  return __jsx(\"div\", {\n    className: classes.validButton\n  }, __jsx(\"div\", {\n    className: classes.triangleUp\n  }), __jsx(\"div\", {\n    className: classes.confirmsUp\n  }, confirms));\n};\n\nvar InValidIcon = function InValidIcon(_ref3) {\n  var classes = _ref3.classes,\n      confirms = _ref3.confirms,\n      onClick = _ref3.onClick;\n  return __jsx(\"div\", {\n    className: classes.validButton\n  }, __jsx(\"div\", {\n    className: classes.triangleDown\n  }), __jsx(\"div\", {\n    className: classes.confirmsDown\n  }, confirms));\n};\n\nvar DialogBox = function DialogBox(_ref4) {\n  var classes = _ref4.classes;\n  return __jsx(\"div\", {\n    className: classes.dialogBox\n  }, \"Coolbeans\");\n};\n\nvar LinkRow = function LinkRow(_ref5) {\n  var classes = _ref5.classes,\n      verified = _ref5.verified,\n      txid = _ref5.txid,\n      terms = _ref5.terms,\n      commercialContent = _ref5.commercialContent,\n      mediaType = _ref5.mediaType,\n      autoPay = _ref5.autoPay,\n      amount = _ref5.amount,\n      handleClick = _ref5.handleClick,\n      purchasedData = _ref5.purchasedData;\n  var twitter = verified.twitter,\n      gab = verified.gab;\n\n  if (mediaType === undefined) {\n    mediaType = 'other';\n  }\n\n  if (autoPay === undefined) {\n    autoPay = null;\n  }\n\n  if (amount === undefined) {\n    amount = 0;\n  }\n\n  var RenderAutoPay = function RenderAutoPay(_ref6) {\n    var mediaType = _ref6.mediaType,\n        amount = _ref6.amount,\n        autoPay = _ref6.autoPay,\n        handleClick = _ref6.handleClick,\n        purchasedData = _ref6.purchasedData;\n\n    if (!purchasedData) {\n      console.log({\n        purchasedData: purchasedData\n      });\n      return null;\n    }\n\n    if (!(mediaType && autoPay)) {\n      return;\n    }\n\n    if (purchasedData.paid) {\n      return __jsx(React.Fragment, null, __jsx(Link, {\n        passHref: true,\n        href: \"/record?txid=\".concat(txid)\n      }, __jsx(\"button\", {\n        className: classes.actionIconButton\n      }, __jsx(\"a\", {\n        className: classes.searchLink\n      }, \"paid\"))));\n    }\n\n    if (mediaType in autoPay) {\n      return __jsx(React.Fragment, null, __jsx(\"div\", null, __jsx(\"button\", {\n        className: classes.actionIconButton,\n        style: purchasedData.paid ? {} : {\n          color: 'red'\n        },\n        onClick: function onClick() {\n          return handleClick(txid, terms);\n        }\n      }, __jsx(\"a\", {\n        className: classes.searchLink\n      }, purchasedData.paid ? 'paid' : autoPay[mediaType] >= amount ? 'autopay' : \"Pay \".concat(amount, \" FLO\")))));\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: classes.linkRowRoot\n  }, gab && __jsx(\"button\", {\n    className: classes.gabButton\n  }, __jsx(\"a\", {\n    className: classes.gabLink,\n    href: \"https://gab.com/OpenIndexProtocol/posts/\".concat(verified.gabId),\n    target: \"_blank\"\n  }, __jsx(\"img\", {\n    src: '/static/assets/icons/gabSvg.svg',\n    alt: 'gab'\n  }))), twitter && __jsx(\"button\", {\n    className: classes.twitterButton\n  }, __jsx(\"a\", {\n    className: classes.twitterLink,\n    href: \"https://twitter.com/oip/status/\".concat(verified.twitterId),\n    target: \"_blank\"\n  }, __jsx(FaTwitter, null))), commercialContent ? __jsx(RenderAutoPay, {\n    mediaType: mediaType,\n    amount: amount,\n    autoPay: autoPay,\n    handleClick: handleClick,\n    purchasedData: purchasedData\n  }) : __jsx(Link, {\n    passHref: true,\n    href: \"/record?txid=\".concat(txid)\n  }, __jsx(\"button\", {\n    className: classes.actionIconButton\n  }, __jsx(\"a\", {\n    className: classes.searchLink\n  }, \"view\"))));\n};\n\nvar BASIC = 'tmpl_66089C48';\nvar VIDEO = 'tmpl_4769368E';\nvar PAYMENT = 'tmpl_3084380E';\nvar COMMERICAL = 'tmpl_D8D0F22C';\nvar SIMPCOINSALE = 'tmpl_DE84D583';\n/******************************************* MAIN COMPONENT ******************************************/\n\nvar RecordRow = function RecordRow(_ref7) {\n  var classes = _ref7.classes,\n      record = _ref7.record,\n      meta = _ref7.meta,\n      isVerified = _ref7.isVerified,\n      _ref7$showOnlyVerifie = _ref7.showOnlyVerifiedPublishers,\n      showOnlyVerifiedPublishers = _ref7$showOnlyVerifie === void 0 ? false : _ref7$showOnlyVerifie,\n      autoPay = _ref7.autoPay,\n      purchaseRecord = _ref7.purchaseRecord,\n      proofOfPurchase = _ref7.proofOfPurchase;\n  var details = record.details; // tags, payment, permissions\n  // eslint-disable-next-line camelcase\n\n  var signed_by = meta.signed_by;\n\n  var _useState = useState({\n    twitter: false,\n    gab: false\n  }),\n      verified = _useState[0],\n      setVerified = _useState[1];\n\n  var _useState2 = useState({\n    proofTxid: '',\n    data: '',\n    paid: false\n  }),\n      purchasedData = _useState2[0],\n      setPurchasedData = _useState2[1];\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(txid, terms) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              purchaseRecord({\n                txid: txid,\n                terms: terms\n              }).then(function (data) {\n                //   console.log(\"DATA\", data)\n                Router.push(\"/record?txid=\".concat(txid)); //   if(data){\n                //     if(data.id === txid){\n                //       setPurchasedData({\n                //         proofTxid: '',\n                //         data: data,\n                //         paid: true\n                //       })\n                //     }\n                //   }\n              })[\"catch\"](function (err) {\n                return console.log(err);\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleClick(_x, _x2) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var mediaTypes = {\n    audio: knownTemplates.audio,\n    video: knownTemplates.video,\n    image: knownTemplates.image,\n    pdf: knownTemplates.pdf\n  };\n  useEffect(function () {\n    if (autoPay.purchased) {\n      var txid = meta.txid;\n      var found = autoPay.purchased.find(function (purchase) {\n        return purchase.txid === txid;\n      });\n\n      if (found) {\n        var _txid = found.txid,\n            payment_txid = found.payment_txid,\n            terms = found.terms;\n        proofOfPurchase({\n          txid: _txid,\n          payment_txid: payment_txid,\n          terms: terms\n        }).then(function (data) {\n          setPurchasedData({\n            proofTxid: payment_txid,\n            data: data,\n            paid: true\n          });\n        })[\"catch\"](function (err) {\n          return console.log(err);\n        });\n      }\n    }\n  }, []);\n  useEffect(function () {\n    var current = true;\n\n    function verify(_x3) {\n      return _verify.apply(this, arguments);\n    }\n\n    function _verify() {\n      _verify = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pubAddr) {\n        var tmplName, localhost, _yield$isVerified, success, payload;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                localhost = false;\n\n                if (config.network === 'testnet') {\n                  tmplName = 'tmpl_2A46C905'; // verified pub testnet template\n\n                  localhost = true;\n                }\n\n                _context2.next = 4;\n                return isVerified({\n                  pubAddr: pubAddr,\n                  templateName: tmplName,\n                  localhost: localhost\n                });\n\n              case 4:\n                _yield$isVerified = _context2.sent;\n                success = _yield$isVerified.success;\n                payload = _yield$isVerified.payload;\n\n                if (success && current) {\n                  setVerified(payload);\n                }\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _verify.apply(this, arguments);\n    }\n\n    verify(signed_by);\n    return function () {\n      current = false;\n    };\n  }, []);\n  var typeOfMedia; // order template data to start with basic and end with payments\n\n  var tmpDetails = [BASIC, VIDEO].concat(_toConsumableArray(Object.keys(details)), [PAYMENT]);\n  var orderedDetails = [];\n\n  var _iterator = _createForOfIteratorHelper(tmpDetails),\n      _step;\n\n  try {\n    var _loop2 = function _loop2() {\n      var tmpl = _step.value;\n\n      if (!orderedDetails.includes(tmpl)) {\n        orderedDetails.push(tmpl);\n      }\n\n      var _loop3 = function _loop3(media) {\n        mediaTypes[media].find(function (x) {\n          if (x == tmpl) {\n            return typeOfMedia = media;\n          }\n        });\n      };\n\n      for (var media in mediaTypes) {\n        _loop3(media);\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop2();\n    } // get VIDEO and thumbnail\n\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var thumbnail;\n  var ipfsUrl;\n\n  if (Object.keys(details).includes(VIDEO)) {\n    if (details[VIDEO].thumbnailFilename && details[VIDEO].addressDirectory) {\n      ipfsUrl = getIpfsUrl({\n        dirName: details[VIDEO].addressDirectory,\n        filename: details[VIDEO].thumbnailFilename\n      });\n      thumbnail = true;\n    }\n  } // COMMERICAL CONTENT \n\n\n  if (Object.keys(details).includes(COMMERICAL)) {\n    var amount;\n    var txid = meta.txid;\n    var terms;\n\n    var _loop = function _loop(item) {\n      var obj = details[item];\n      Object.keys(obj).map(function (key) {\n        if (key === 'embeddedTerms') {\n          terms = obj[key][0];\n        }\n\n        if (key === 'amount') {\n          return amount = obj[key];\n        }\n      });\n    };\n\n    for (var item in details) {\n      _loop(item);\n    }\n\n    return __jsx(RecordRowData, {\n      classes: classes,\n      meta: meta,\n      thumbnail: thumbnail,\n      ipfsUrl: ipfsUrl,\n      orderedDetails: orderedDetails,\n      details: details // eslint-disable-next-line camelcase\n      ,\n      signed_by: signed_by,\n      verified: verified,\n      commercialContent: true,\n      mediaType: typeOfMedia,\n      autoPay: autoPay,\n      amount: Number(amount),\n      handleClick: handleClick,\n      purchasedData: purchasedData,\n      terms: terms.toString()\n    });\n  }\n\n  if (showOnlyVerifiedPublishers) {\n    if (verified.gab || verified.twitter) {\n      return __jsx(RecordRowData, {\n        classes: classes,\n        meta: meta,\n        thumbnail: thumbnail,\n        ipfsUrl: ipfsUrl,\n        orderedDetails: orderedDetails,\n        details: details // eslint-disable-next-line camelcase\n        ,\n        signed_by: signed_by,\n        verified: verified,\n        showExpand: true,\n        commercialContent: false\n      });\n    } else return null;\n  }\n\n  return __jsx(RecordRowData, {\n    classes: classes,\n    meta: meta,\n    thumbnail: thumbnail,\n    ipfsUrl: ipfsUrl,\n    orderedDetails: orderedDetails,\n    details: details // eslint-disable-next-line camelcase\n    ,\n    signed_by: signed_by,\n    verified: verified,\n    showExpand: true,\n    commercialContent: false\n  });\n};\n/******************************************* END MAIN COMPONENT ******************************************/\n\n\nvar RecordRowData = function RecordRowData(_ref9) {\n  var classes = _ref9.classes,\n      verified = _ref9.verified,\n      details = _ref9.details,\n      meta = _ref9.meta,\n      thumbnail = _ref9.thumbnail,\n      ipfsUrl = _ref9.ipfsUrl,\n      orderedDetails = _ref9.orderedDetails,\n      signed_by = _ref9.signed_by,\n      showExpand = _ref9.showExpand,\n      commercialContent = _ref9.commercialContent,\n      mediaType = _ref9.mediaType,\n      autoPay = _ref9.autoPay,\n      amount = _ref9.amount,\n      handleClick = _ref9.handleClick,\n      purchasedData = _ref9.purchasedData,\n      terms = _ref9.terms;\n  return __jsx(\"div\", {\n    className: classes.root\n  }, __jsx(ActionBar, {\n    classes: classes,\n    verified: verified,\n    recordDetails: details,\n    txid: meta.txid,\n    commercialContent: commercialContent,\n    mediaType: mediaType,\n    autoPay: autoPay,\n    amount: amount,\n    handleClick: handleClick,\n    purchasedData: purchasedData,\n    terms: terms\n  }), __jsx(TableData, {\n    classes: classes,\n    thumbnail: thumbnail,\n    ipfsUrl: ipfsUrl,\n    orderedDetails: orderedDetails,\n    details: details // eslint-disable-next-line camelcase\n    ,\n    signed_by: signed_by,\n    verified: verified,\n    purchasedData: purchasedData\n  }));\n};\n\nvar TableData = function TableData(_ref10) {\n  var classes = _ref10.classes,\n      thumbnail = _ref10.thumbnail,\n      ipfsUrl = _ref10.ipfsUrl,\n      orderedDetails = _ref10.orderedDetails,\n      details = _ref10.details,\n      signed_by = _ref10.signed_by,\n      verified = _ref10.verified,\n      purchasedData = _ref10.purchasedData;\n  return __jsx(\"div\", {\n    className: classes.tableData\n  }, thumbnail && __jsx(Thumbnail, {\n    src: ipfsUrl,\n    classes: classes\n  }), __jsx(\"div\", {\n    className: classes.templateData\n  }, orderedDetails.map(function (tmpl) {\n    if (!details[tmpl]) return null;\n    return __jsx(TemplateData, {\n      classes: classes,\n      tmpl: tmpl,\n      details: details[tmpl],\n      key: tmpl,\n      purchasedData: purchasedData\n    });\n  }), signed_by && __jsx(React.Fragment, null, __jsx(\"span\", {\n    className: classes.templateName\n  }, \"signed_by:\"), __jsx(\"span\", null, \" \", signed_by)), verified.name && __jsx(\"div\", {\n    style: {\n      marginTop: '7px'\n    }\n  }, __jsx(\"span\", {\n    className: classes.templateName\n  }, \"verified name:\"), __jsx(\"span\", null, \" \", verified.name))));\n};\n\nvar Thumbnail = function Thumbnail(_ref11) {\n  var src = _ref11.src,\n      classes = _ref11.classes;\n  return __jsx(\"img\", {\n    className: classes.thumbnail,\n    src: src,\n    alt: 'thumbnail'\n  });\n};\n\nvar TemplateData = function TemplateData(_ref12) {\n  var classes = _ref12.classes,\n      tmpl = _ref12.tmpl,\n      details = _ref12.details,\n      purchasedData = _ref12.purchasedData;\n  var templateName;\n  var mediaType = '';\n\n  if (knownTemplates[tmpl]) {\n    templateName = knownTemplates[tmpl].friendly_name;\n  } else if (knownTemplates.testnet[tmpl]) {\n    templateName = knownTemplates.testnet[tmpl].friendly_name;\n  } else {\n    templateName = 'Unknown Template';\n  }\n\n  if (tmpl === BASIC) {\n    details = {\n      title: details.title,\n      description: details.description,\n      year: details.year\n    };\n  }\n\n  if (tmpl === VIDEO) {\n    details = {\n      displayName: details.displayName,\n      addressDirectory: details.addressDirectory,\n      filename: details.filename,\n      thumbnailFilename: details.thumbnailFilename,\n      publishDate: details.publishDate\n    };\n  }\n\n  if (tmpl === PAYMENT) {\n    details = _objectSpread({\n      platformCut: details.platformCut,\n      influencerCut: details.influencerCut\n    }, details);\n  }\n\n  if (tmpl === COMMERICAL) {\n    if (purchasedData.paid && purchasedData.data) {\n      details = {\n        location: purchasedData.data.location,\n        network: purchasedData.data.network,\n        embeddedTerms: purchasedData.data.term,\n        valid_until: purchasedData.data.valid_until\n      };\n    } else {\n      details = {\n        embeddedTerms: details.embeddedTerms\n      };\n    }\n  }\n\n  if (tmpl === SIMPCOINSALE) {\n    var coin = details.coin;\n    var flo = 'f9964d1e840608b68a3795fd2597e9b232dfce1029251d481b2110c83a68adf7';\n    var btc = '058bf55be2639673228e1904e2326e13184de08837983cf03cc7fef73ad13d5f';\n    var rvn = '';\n\n    switch (coin) {\n      case flo:\n        details.coin = ' FLO';\n        break;\n\n      case btc:\n        details.coin = ' BTC';\n        break;\n      // case rvn:\n      //   details.coin = ' RVN'\n      //   break;\n    }\n  }\n\n  return __jsx(\"div\", {\n    className: classes.templateDataRow\n  }, __jsx(\"span\", {\n    className: classes.templateName\n  }, templateName, \":\"), __jsx(\"span\", null, \" \", tmpl), Object.keys(details).map(function (recordField) {\n    return __jsx(RecordField, {\n      classes: classes,\n      key: recordField,\n      recordField: recordField,\n      recordFieldData: details[recordField]\n    });\n  }));\n};\n\nvar RecordField = function RecordField(_ref13) {\n  var classes = _ref13.classes,\n      recordField = _ref13.recordField,\n      recordFieldData = _ref13.recordFieldData;\n\n  if (!recordFieldData) {\n    return null;\n  }\n\n  if (recordFieldData.raw) {\n    recordFieldData = recordFieldData.raw;\n  }\n\n  return __jsx(\"div\", {\n    className: classes.recordFieldRow\n  }, __jsx(\"span\", {\n    className: classes.recordField\n  }, recordField, \":\"), __jsx(\"span\", null, \" \", recordFieldData));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    autoPay: state.Autopay\n  };\n}\n\nexport default connect(mapStateToProps, {\n  purchaseRecord: purchaseRecord,\n  proofOfPurchase: proofOfPurchase,\n  updatePurchasedTxid: updatePurchasedTxid\n})(withStyles(styles)(RecordRow));","map":null,"metadata":{},"sourceType":"module"}